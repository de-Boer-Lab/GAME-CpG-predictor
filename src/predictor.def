Bootstrap: docker
From: python:3.13-slim

%files
    ../CpG_Predictor /CpG_Predictor

%environment
    export APPTAINER_NO_MOUNT="home,tmp,proc,sys,dev"
    export LC_ALL=C
    export PATH="/opt/conda/bin:$PATH"
    export LD_LIBRARY_PATH="/opt/conda/lib:$LD_LIBRARY_PATH"
   
%post
    # Install system packages and dependencies
    echo "Installing system dependencies..."
    apt-get update && \
    apt-get install -y --no-install-recommends python3-pip bzip2 ca-certificates && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

    echo "Installing Python dependencies..."
    python -m pip install --upgrade pip
    python -m pip install --no-cache-dir numpy tqdm pandas msgpack scipy flask waitress
    
    # Set permissions to access all directories
    echo "Setting permissions for directories and script..."
    chmod -R 755 /CpG_Predictor/

%runscript
    exec python3 /CpG_Predictor/predictor_RestAPI.py "$@"

%startscript
    exec python3 /CpG_Predictor/predictor_RestAPI.py "$@"

%labels
    CpG Island Predictor
    Date 2025-08-28
